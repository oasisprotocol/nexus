Fix consensus related events edgecase

The query did not include the event type in the join, which could result
in wrong events showing up as related events.
